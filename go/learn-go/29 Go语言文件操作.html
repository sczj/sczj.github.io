<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Go语言文件操作 | 六松岛-福小林</title>
    <meta name="description" content="千里之行,始于足下">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/img/favicon.ico">
  <script charset="utf-8" src="/js/main.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
  <meta name="keywords" content="福小林,奔奔,ourLang,CentOS,JAVA,vue组件,lsdCloud">
  <script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-146891701-1"></script>
  <script>window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'UA-146891701-1');</script>
  <script>var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?56eae8eec590ccaef1d5ff99d766f315";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();</script>
    
    <link rel="preload" href="/assets/css/0.styles.360a9128.css" as="style"><link rel="preload" href="/assets/js/app.30b04212.js" as="script"><link rel="preload" href="/assets/js/2.73c04003.js" as="script"><link rel="preload" href="/assets/js/83.56277cf4.js" as="script"><link rel="prefetch" href="/assets/js/10.0dfb4509.js"><link rel="prefetch" href="/assets/js/100.7179544d.js"><link rel="prefetch" href="/assets/js/101.484a289f.js"><link rel="prefetch" href="/assets/js/102.b9bdf6b9.js"><link rel="prefetch" href="/assets/js/103.982418d8.js"><link rel="prefetch" href="/assets/js/104.ae28deb8.js"><link rel="prefetch" href="/assets/js/105.1c8bf05a.js"><link rel="prefetch" href="/assets/js/106.08ce02d5.js"><link rel="prefetch" href="/assets/js/107.9814e03b.js"><link rel="prefetch" href="/assets/js/108.3ca04917.js"><link rel="prefetch" href="/assets/js/109.0fcf0488.js"><link rel="prefetch" href="/assets/js/11.2f72992a.js"><link rel="prefetch" href="/assets/js/110.2bb5d3e8.js"><link rel="prefetch" href="/assets/js/111.9ceb925b.js"><link rel="prefetch" href="/assets/js/112.ba3e6ce4.js"><link rel="prefetch" href="/assets/js/113.ace0f2e7.js"><link rel="prefetch" href="/assets/js/114.456ccd74.js"><link rel="prefetch" href="/assets/js/115.e1bff5b3.js"><link rel="prefetch" href="/assets/js/116.11b7ae26.js"><link rel="prefetch" href="/assets/js/117.4dd94f49.js"><link rel="prefetch" href="/assets/js/118.8b9ae7e3.js"><link rel="prefetch" href="/assets/js/119.21f0196b.js"><link rel="prefetch" href="/assets/js/12.925da151.js"><link rel="prefetch" href="/assets/js/120.0471dc55.js"><link rel="prefetch" href="/assets/js/121.9ed449e1.js"><link rel="prefetch" href="/assets/js/122.94111fe7.js"><link rel="prefetch" href="/assets/js/13.e8f105ea.js"><link rel="prefetch" href="/assets/js/14.a0212ea5.js"><link rel="prefetch" href="/assets/js/15.82a55e1a.js"><link rel="prefetch" href="/assets/js/16.91f3ace7.js"><link rel="prefetch" href="/assets/js/17.d0bbf17a.js"><link rel="prefetch" href="/assets/js/18.014612b1.js"><link rel="prefetch" href="/assets/js/19.e7bc7b37.js"><link rel="prefetch" href="/assets/js/20.0fb97316.js"><link rel="prefetch" href="/assets/js/21.bb632c3b.js"><link rel="prefetch" href="/assets/js/22.13a69f68.js"><link rel="prefetch" href="/assets/js/23.f77a5633.js"><link rel="prefetch" href="/assets/js/24.d776c9e7.js"><link rel="prefetch" href="/assets/js/25.2f331b69.js"><link rel="prefetch" href="/assets/js/26.b145c5e7.js"><link rel="prefetch" href="/assets/js/27.96ab8d3a.js"><link rel="prefetch" href="/assets/js/28.3b3abdb7.js"><link rel="prefetch" href="/assets/js/29.0fa596f8.js"><link rel="prefetch" href="/assets/js/3.83321553.js"><link rel="prefetch" href="/assets/js/30.4a7395cc.js"><link rel="prefetch" href="/assets/js/31.f19377c3.js"><link rel="prefetch" href="/assets/js/32.b2ea1cff.js"><link rel="prefetch" href="/assets/js/33.a7bc1353.js"><link rel="prefetch" href="/assets/js/34.9f4f5514.js"><link rel="prefetch" href="/assets/js/35.b2720dee.js"><link rel="prefetch" href="/assets/js/36.e14d46e4.js"><link rel="prefetch" href="/assets/js/37.3666a3e2.js"><link rel="prefetch" href="/assets/js/38.75e07b8a.js"><link rel="prefetch" href="/assets/js/39.aa2ae7fe.js"><link rel="prefetch" href="/assets/js/4.5597ce85.js"><link rel="prefetch" href="/assets/js/40.97f6459a.js"><link rel="prefetch" href="/assets/js/41.445e3e26.js"><link rel="prefetch" href="/assets/js/42.ffc9e50a.js"><link rel="prefetch" href="/assets/js/43.ace41f42.js"><link rel="prefetch" href="/assets/js/44.62ba4555.js"><link rel="prefetch" href="/assets/js/45.08f900aa.js"><link rel="prefetch" href="/assets/js/46.47259265.js"><link rel="prefetch" href="/assets/js/47.547e0f92.js"><link rel="prefetch" href="/assets/js/48.21f6693f.js"><link rel="prefetch" href="/assets/js/49.db881f96.js"><link rel="prefetch" href="/assets/js/5.32657e0f.js"><link rel="prefetch" href="/assets/js/50.93cd82ae.js"><link rel="prefetch" href="/assets/js/51.01c10013.js"><link rel="prefetch" href="/assets/js/52.91004033.js"><link rel="prefetch" href="/assets/js/53.7dffaac8.js"><link rel="prefetch" href="/assets/js/54.5d906e8e.js"><link rel="prefetch" href="/assets/js/55.f3329c5d.js"><link rel="prefetch" href="/assets/js/56.3dcaea6d.js"><link rel="prefetch" href="/assets/js/57.208ce894.js"><link rel="prefetch" href="/assets/js/58.7808b00a.js"><link rel="prefetch" href="/assets/js/59.dac99d0e.js"><link rel="prefetch" href="/assets/js/6.0bb4d748.js"><link rel="prefetch" href="/assets/js/60.5d045646.js"><link rel="prefetch" href="/assets/js/61.91ab9048.js"><link rel="prefetch" href="/assets/js/62.3b3ff673.js"><link rel="prefetch" href="/assets/js/63.e5a9ee6b.js"><link rel="prefetch" href="/assets/js/64.f27372fc.js"><link rel="prefetch" href="/assets/js/65.2bb59a36.js"><link rel="prefetch" href="/assets/js/66.a2263c6e.js"><link rel="prefetch" href="/assets/js/67.d22f8dbe.js"><link rel="prefetch" href="/assets/js/68.f6520f7c.js"><link rel="prefetch" href="/assets/js/69.42dad5a3.js"><link rel="prefetch" href="/assets/js/7.758d484d.js"><link rel="prefetch" href="/assets/js/70.5b62a0e5.js"><link rel="prefetch" href="/assets/js/71.ca15fdc7.js"><link rel="prefetch" href="/assets/js/72.6e8d4da1.js"><link rel="prefetch" href="/assets/js/73.f547befa.js"><link rel="prefetch" href="/assets/js/74.cf5fc42b.js"><link rel="prefetch" href="/assets/js/75.23ea867d.js"><link rel="prefetch" href="/assets/js/76.2b92575b.js"><link rel="prefetch" href="/assets/js/77.a327d476.js"><link rel="prefetch" href="/assets/js/78.feeef9ff.js"><link rel="prefetch" href="/assets/js/79.7a8c61ed.js"><link rel="prefetch" href="/assets/js/8.4bdd1bf6.js"><link rel="prefetch" href="/assets/js/80.7923be5e.js"><link rel="prefetch" href="/assets/js/81.201b67ef.js"><link rel="prefetch" href="/assets/js/82.00c5f674.js"><link rel="prefetch" href="/assets/js/84.d615ad8d.js"><link rel="prefetch" href="/assets/js/85.27a76c36.js"><link rel="prefetch" href="/assets/js/86.ec8d7ac8.js"><link rel="prefetch" href="/assets/js/87.ce1914d9.js"><link rel="prefetch" href="/assets/js/88.e20288e6.js"><link rel="prefetch" href="/assets/js/89.68963d20.js"><link rel="prefetch" href="/assets/js/9.64b1f220.js"><link rel="prefetch" href="/assets/js/90.da446e2b.js"><link rel="prefetch" href="/assets/js/91.e9e4ed17.js"><link rel="prefetch" href="/assets/js/92.01745571.js"><link rel="prefetch" href="/assets/js/93.189ab23d.js"><link rel="prefetch" href="/assets/js/94.2a49cad2.js"><link rel="prefetch" href="/assets/js/95.8c004376.js"><link rel="prefetch" href="/assets/js/96.a5489597.js"><link rel="prefetch" href="/assets/js/97.90844480.js"><link rel="prefetch" href="/assets/js/98.d3a90abe.js"><link rel="prefetch" href="/assets/js/99.9286b79b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.360a9128.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">六松岛-福小林</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/study-guide/introduction.html" class="nav-link">
  学习指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术分类" class="dropdown-title"><span class="title">技术分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java/introduction.html" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/go/introduction.html" class="nav-link">
  Go
</a></li><li class="dropdown-item"><!----> <a href="/sql/introduction.html" class="nav-link">
  SQL
</a></li><li class="dropdown-item"><!----> <a href="/fhir/introduction.html" class="nav-link">
  FHIR
</a></li></ul></div></div><div class="nav-item"><a href="/blog/introduction.html" class="nav-link">
  个人博客
</a></div><div class="nav-item"><a href="/tool/developmentBox.html" class="nav-link">
  开发百宝箱
</a></div><div class="nav-item"><a href="/project/introduction.html" class="nav-link">
  项目分享
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="了解更多" class="dropdown-title"><span class="title">了解更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://wpa.qq.com/msgrd?v=3&amp;uin=180331730&amp;site=qq&amp;menu=yes" target="_blank" rel="noopener noreferrer" class="nav-link external">
  其他合作
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://www.lsdcloud.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人网站
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/ourlang" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/ourlang" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/qq_37493556" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="/linkExchanges/introduction.html" class="nav-link">
  友情链接
</a></div> <a href="https://github.com/sczj/goblog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/study-guide/introduction.html" class="nav-link">
  学习指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术分类" class="dropdown-title"><span class="title">技术分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java/introduction.html" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/go/introduction.html" class="nav-link">
  Go
</a></li><li class="dropdown-item"><!----> <a href="/sql/introduction.html" class="nav-link">
  SQL
</a></li><li class="dropdown-item"><!----> <a href="/fhir/introduction.html" class="nav-link">
  FHIR
</a></li></ul></div></div><div class="nav-item"><a href="/blog/introduction.html" class="nav-link">
  个人博客
</a></div><div class="nav-item"><a href="/tool/developmentBox.html" class="nav-link">
  开发百宝箱
</a></div><div class="nav-item"><a href="/project/introduction.html" class="nav-link">
  项目分享
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="了解更多" class="dropdown-title"><span class="title">了解更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://wpa.qq.com/msgrd?v=3&amp;uin=180331730&amp;site=qq&amp;menu=yes" target="_blank" rel="noopener noreferrer" class="nav-link external">
  其他合作
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://www.lsdcloud.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人网站
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/ourlang" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/ourlang" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/qq_37493556" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="/linkExchanges/introduction.html" class="nav-link">
  友情链接
</a></div> <a href="https://github.com/sczj/goblog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/go/introduction.html" class="sidebar-link">Go语言</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Go教程</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/go/learn-go/10 从零搭建Go语言开发环境.html" class="sidebar-link">从零搭建Go语言开发环境</a></li><li><a href="/go/learn-go/11 第一个Go程序.html" class="sidebar-link">第一个Go程序Hello World</a></li><li><a href="/go/learn-go/12 Go 语言数据类型.html" class="sidebar-link">Go语言数据类型</a></li><li><a href="/go/learn-go/13 Go语言变量.html" class="sidebar-link">Go语言变量</a></li><li><a href="/go/learn-go/14 Go语言常量.html" class="sidebar-link">Go语言常量</a></li><li><a href="/go/learn-go/15 Go 语言运算符.html" class="sidebar-link">Go语言运算符</a></li><li><a href="/go/learn-go/16 Go语言条件语句.html" class="sidebar-link">Go语言条件语句</a></li><li><a href="/go/learn-go/17 Go语言的循环语句.html" class="sidebar-link">Go语言的循环语句</a></li><li><a href="/go/learn-go/18 Go 语言数组.html" class="sidebar-link">Go语言数组</a></li><li><a href="/go/learn-go/19 Go语言切片.html" class="sidebar-link">Go语言基础之切片</a></li><li><a href="/go/learn-go/20 Go语言map.html" class="sidebar-link">Go语言基础之map</a></li><li><a href="/go/learn-go/21 Go语言指针.html" class="sidebar-link">Go语言指针</a></li><li><a href="/go/learn-go/22 Go语言函数.html" class="sidebar-link">Go语言函数</a></li><li><a href="/go/learn-go/23  fmt.Printf总结.html" class="sidebar-link">fmt.Printf总结</a></li><li><a href="/go/learn-go/24 Go语言常用方法总结.html" class="sidebar-link">Go常用方法总结</a></li><li><a href="/go/learn-go/25 Go语言结构体.html" class="sidebar-link">Go语言结构体</a></li><li><a href="/go/learn-go/26 Go语言方法.html" class="sidebar-link">Go语言方法</a></li><li><a href="/go/learn-go/27 Go语言接口.html" class="sidebar-link">Go语言接口</a></li><li><a href="/go/learn-go/28 Go语言并发编程.html" class="sidebar-link">Go语言并发编程</a></li><li><a href="/go/learn-go/29 Go语言文件操作.html" class="active sidebar-link">Go语言文件操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/go/learn-go/29 Go语言文件操作.html#_1-文件的概念" class="sidebar-link">1 文件的概念</a></li><li class="sidebar-sub-header"><a href="/go/learn-go/29 Go语言文件操作.html#_2-输入流和输出流" class="sidebar-link">2 输入流和输出流</a></li><li class="sidebar-sub-header"><a href="/go/learn-go/29 Go语言文件操作.html#_3-打开和关闭文件" class="sidebar-link">3 打开和关闭文件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/go/learn-go/29 Go语言文件操作.html#_3-1-简单举例" class="sidebar-link">3.1 简单举例</a></li></ul></li><li class="sidebar-sub-header"><a href="/go/learn-go/29 Go语言文件操作.html#_4-读取文件" class="sidebar-link">4 读取文件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/go/learn-go/29 Go语言文件操作.html#_4-1-os包下的open-和read" class="sidebar-link">4.1 OS包下的Open()和Read()</a></li><li class="sidebar-sub-header"><a href="/go/learn-go/29 Go语言文件操作.html#_4-2-bufio-带缓冲区的方式读取" class="sidebar-link">4.2 bufio-带缓冲区的方式读取</a></li><li class="sidebar-sub-header"><a href="/go/learn-go/29 Go语言文件操作.html#_4-3-ioutil-包下的读取" class="sidebar-link">4.3 ioutil 包下的读取</a></li></ul></li><li class="sidebar-sub-header"><a href="/go/learn-go/29 Go语言文件操作.html#_5-写文件操作应用实例" class="sidebar-link">5 写文件操作应用实例</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/go/learn-go/29 Go语言文件操作.html#_5-1-os包下的写文件" class="sidebar-link">5.1 os包下的写文件</a></li><li class="sidebar-sub-header"><a href="/go/learn-go/29 Go语言文件操作.html#_5-2-bufio包下的写文件" class="sidebar-link">5.2 bufio包下的写文件</a></li><li class="sidebar-sub-header"><a href="/go/learn-go/29 Go语言文件操作.html#_5-3-ioutil下的写文件" class="sidebar-link">5.3 ioutil下的写文件</a></li></ul></li><li class="sidebar-sub-header"><a href="/go/learn-go/29 Go语言文件操作.html#_6文件编程应用实例" class="sidebar-link">6文件编程应用实例</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/go/learn-go/29 Go语言文件操作.html#_6-1-拷贝文件" class="sidebar-link">6.1 拷贝文件</a></li><li class="sidebar-sub-header"><a href="/go/learn-go/29 Go语言文件操作.html#_6-2-统计字符数量" class="sidebar-link">6.2 统计字符数量</a></li></ul></li></ul></li><li><a href="/go/learn-go/30 Go语言单元测试.html" class="sidebar-link">Go语言单元测试</a></li><li><a href="/go/learn-go/31 Go语言之http.html" class="sidebar-link">Go语言之http</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Go Web框架</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Go工具中间件</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="go语言文件操作"><a href="#go语言文件操作" class="header-anchor">#</a> Go语言文件操作</h1> <h2 id="_1-文件的概念"><a href="#_1-文件的概念" class="header-anchor">#</a> 1 文件的概念</h2> <blockquote><p>文件是数据源（保存数据的地方）的一种，比如大家经常使用的word文档,txt文档,excel文件…都是文件。文件最主要的作用就是保存数据，它既可以保存一张图片，也可以保存视频，声音………</p></blockquote> <h2 id="_2-输入流和输出流"><a href="#_2-输入流和输出流" class="header-anchor">#</a> 2 输入流和输出流</h2> <blockquote><p>文件在程序是以流的形式操作的, 在Python,JAVA,Go ... 都一样;</p></blockquote> <p><a data-fancybox="" title="输入流和输出流" href="/img/goImage/file.png"><img src="/img/goImage/file.png" alt="输入流和输出流"></a></p> <h2 id="_3-打开和关闭文件"><a href="#_3-打开和关闭文件" class="header-anchor">#</a> 3 打开和关闭文件</h2> <blockquote><p>要想操作文件，有两个关键的概念，就是打开文件和关闭文件。
os包下有一个Open函数，如下：</p></blockquote> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">//Open打开指定的文件进行读取。如果成功，可以使用返回File对象的方法进行读取;</span>
<span class="token comment">//关联的文件描述符只有O_RDONLY模式。如果出现错误，则类型为*PathError。</span>
<span class="token comment">//Open()函数返回的是一个 *File 文件类型的指针，和一个error。</span>
<span class="token keyword">func</span> <span class="token function">Open</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>File<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">//Close关闭文件，使其不能用于I/O。如果有错误，则返回一个。</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>f <span class="token operator">*</span>File<span class="token punctuation">)</span> <span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">error</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_3-1-简单举例"><a href="#_3-1-简单举例" class="header-anchor">#</a> 3.1 简单举例</h3> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;os&quot;</span>
<span class="token punctuation">)</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">//这里的file 有人叫对象，有人叫指针，有人叫句柄，无所谓--心态,哈哈</span>
	<span class="token comment">//打开文件</span>
	file<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token string">&quot;D:/test.txt&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err<span class="token operator">!=</span><span class="token boolean">nil</span><span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//这里简单打印下这个file，没有任何操作，现在是个指针而已</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;file=%v&quot;</span><span class="token punctuation">,</span>file<span class="token punctuation">)</span>
	e<span class="token operator">:=</span> file<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//关闭文件</span>
	<span class="token keyword">if</span> e<span class="token operator">!=</span><span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//输出结果</span>
file<span class="token operator">=</span><span class="token operator">&amp;</span><span class="token punctuation">{</span><span class="token number">0xc000090780</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="_4-读取文件"><a href="#_4-读取文件" class="header-anchor">#</a> 4 读取文件</h2> <blockquote><p>go语言读取文件有很多种方式，基本上在标准库的 <code>os</code>包，<code>io/ioutil</code>包以及<code>bufio</code>包,比如下面几种</p></blockquote> <ul><li>1、os包下的Open()和Read()</li> <li>2、bufio包下的带缓冲的读取</li> <li>3、ioutil包下的读取</li></ul> <h3 id="_4-1-os包下的open-和read"><a href="#_4-1-os包下的open-和read" class="header-anchor">#</a> 4.1 OS包下的Open()和Read()</h3> <blockquote><p>os包提供了平台无关的操作系统功能接口。 里面的File 的各种方法也是可以获取文件相关信息，具体的可以看<a href="https://golang.org/pkg/os/#File" target="_blank" rel="noopener noreferrer">api<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。 比如读取文件，我们就可以用 Open() 和Read()方法
<code>D:/test.txt</code>内容如下图</p></blockquote> <p><a data-fancybox="" title="test.txt内容" href="/img/goImage/file2.png"><img src="/img/goImage/file2.png" alt="test.txt内容"></a></p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">//从文件中读取到len(b)字节。它返回读取的字节数和遇到的任何错误。</span>
<span class="token comment">//读取到文件末尾，Read返回0 io.EOF。</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>f <span class="token operator">*</span>File<span class="token punctuation">)</span> <span class="token function">Read</span><span class="token punctuation">(</span>b <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="os包下的read-举例"><a href="#os包下的read-举例" class="header-anchor">#</a> os包下的Read()举例</h4> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main
<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;io&quot;</span>
	<span class="token string">&quot;os&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// 只读方式打开当前目录下的main.go文件</span>
	file<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token string">&quot;D:/test.txt&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;打开文件异常, err:&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">defer</span> file<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//退出时关闭</span>
	<span class="token comment">// 使用Read方法读取数据</span>
	<span class="token keyword">var</span> tmp <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">)</span>
	n<span class="token punctuation">,</span> err <span class="token operator">:=</span> file<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">==</span> io<span class="token punctuation">.</span>EOF <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;文件读完了&quot;</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;读取文件错误, err:&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;读取了%d字节数据\n&quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>tmp<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h4 id="输出结果如下"><a href="#输出结果如下" class="header-anchor">#</a> 输出结果如下</h4> <div class="language-go line-numbers-mode"><pre class="language-go"><code>读取了<span class="token number">55</span>字节数据
﻿the first data
two Hello 中国
three world 成都
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_4-2-bufio-带缓冲区的方式读取"><a href="#_4-2-bufio-带缓冲区的方式读取" class="header-anchor">#</a> 4.2 bufio-带缓冲区的方式读取</h3> <blockquote><p>bufio是在file的基础上封装了一层API，支持更多的功能。</p></blockquote> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main
<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;bufio&quot;</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;io&quot;</span>
	<span class="token string">&quot;os&quot;</span>
<span class="token punctuation">)</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">//打开文件</span>
	file<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token string">&quot;D:/test.txt&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err<span class="token operator">!=</span><span class="token boolean">nil</span><span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">defer</span> file<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//函数退出时关闭file对象</span>
	<span class="token comment">//创建一个*Reader ，带缓冲区，注意默认是4096</span>
	reader<span class="token operator">:=</span>bufio<span class="token punctuation">.</span><span class="token function">NewReader</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span>
	<span class="token comment">//循环读取</span>
	<span class="token keyword">for</span><span class="token punctuation">{</span>
		line<span class="token punctuation">,</span>err<span class="token operator">:=</span>reader<span class="token punctuation">.</span><span class="token function">ReadString</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span><span class="token comment">//读到换行就结束</span>
		fmt<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span>
		<span class="token keyword">if</span> err<span class="token operator">==</span>io<span class="token punctuation">.</span>EOF<span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">{</span>
				fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;文件读完了&quot;</span><span class="token punctuation">)</span>
			<span class="token keyword">break</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;读取文件错误, err:&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
			<span class="token keyword">return</span>
		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="_4-3-ioutil-包下的读取"><a href="#_4-3-ioutil-包下的读取" class="header-anchor">#</a> 4.3 ioutil 包下的读取</h3> <blockquote><p>更多ioutil说明请看<a href="https://golang.org/pkg/io/ioutil/" target="_blank" rel="noopener noreferrer">ioutil-API<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <div class="custom-block tip"><p class="custom-block-title">ioutil包下的函数</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token operator">-</span> <span class="token keyword">func</span> <span class="token function">NopCloser</span><span class="token punctuation">(</span>r io<span class="token punctuation">.</span>Reader<span class="token punctuation">)</span> io<span class="token punctuation">.</span>ReadCloser   <span class="token comment">//其实就是个转换工具</span>
<span class="token operator">-</span> <span class="token keyword">func</span> <span class="token function">ReadAll</span><span class="token punctuation">(</span>r io<span class="token punctuation">.</span>Reader<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> 	<span class="token comment">//从io.Reader中一次读取所有数据</span>
<span class="token operator">-</span> <span class="token keyword">func</span> <span class="token function">ReadDir</span><span class="token punctuation">(</span>dirname <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span>os<span class="token punctuation">.</span>FileInfo<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span><span class="token comment">//读取目录并返回排好序的文件和子目录名</span>
<span class="token operator">-</span> <span class="token keyword">func</span> <span class="token function">ReadFile</span><span class="token punctuation">(</span>filename <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token comment">//ReadFile 读取整个文件的内容</span>
<span class="token operator">-</span> <span class="token keyword">func</span> <span class="token function">TempDir</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span> prefix <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span>  <span class="token comment">//临时目录</span>
<span class="token operator">-</span> <span class="token keyword">func</span> <span class="token function">TempFile</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span> pattern <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>f <span class="token operator">*</span>os<span class="token punctuation">.</span>File<span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span>  <span class="token comment">//临时文件</span>
<span class="token operator">-</span> <span class="token keyword">func</span> <span class="token function">WriteFile</span><span class="token punctuation">(</span>filename <span class="token builtin">string</span><span class="token punctuation">,</span> data <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> perm os<span class="token punctuation">.</span>FileMode<span class="token punctuation">)</span> <span class="token builtin">error</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></div> <h4 id="注意点"><a href="#注意点" class="header-anchor">#</a> 注意点</h4> <p><code>ReadFile</code>不需要写<code>Close()</code>内部已经封装了。而<code>ReadAll()</code>好像内部没写，我反正没找到。所以，这个不同一定要注意。</p> <h4 id="ioutil读取文件举例"><a href="#ioutil读取文件举例" class="header-anchor">#</a> ioutil读取文件举例</h4> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;io/ioutil&quot;</span>
<span class="token punctuation">)</span>

<span class="token comment">// ioutil.ReadFile读取整个文件</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	content<span class="token punctuation">,</span> err <span class="token operator">:=</span> ioutil<span class="token punctuation">.</span><span class="token function">ReadFile</span><span class="token punctuation">(</span><span class="token string">&quot;D:/test.txt&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;读取文件错误, err:&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="_5-写文件操作应用实例"><a href="#_5-写文件操作应用实例" class="header-anchor">#</a> 5 写文件操作应用实例</h2> <ul><li>1、os 包下的Read 和Write</li> <li>2、bufio包下的writer，bufio.NewWriter</li> <li>3、ioutil 下的WriteFile</li></ul> <h3 id="_5-1-os包下的写文件"><a href="#_5-1-os包下的写文件" class="header-anchor">#</a> 5.1 os包下的写文件</h3> <blockquote><p><code>os.OpenFile()</code>函数能够以指定模式打开文件，从而实现文件写入相关功能。</p></blockquote> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">OpenFile</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">,</span> flag <span class="token builtin">int</span><span class="token punctuation">,</span> perm FileMode<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>File<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>name：要打开的文件名 flag：打开文件的模式。perm：文件权限，一个八进制数。r（读）04，w（写）02，x（执行）01。 打开文件的模式有以下几种：</strong></p> <table><thead><tr><th style="text-align:center;">模式</th> <th style="text-align:center;">含义</th></tr></thead> <tbody><tr><td style="text-align:center;">os.O_WRONLY</td> <td style="text-align:center;">只写</td></tr> <tr><td style="text-align:center;">os.O_CREATE</td> <td style="text-align:center;">创建文件</td></tr> <tr><td style="text-align:center;">os.O_RDONLY</td> <td style="text-align:center;">只读</td></tr> <tr><td style="text-align:center;">os.O_RDWR</td> <td style="text-align:center;">读写</td></tr> <tr><td style="text-align:center;">os.O_TRUNC</td> <td style="text-align:center;">清空</td></tr> <tr><td style="text-align:center;">os.O_APPEND</td> <td style="text-align:center;">追加</td></tr></tbody></table> <h4 id="举例"><a href="#举例" class="header-anchor">#</a> 举例</h4> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;os&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	filePath <span class="token operator">:=</span> <span class="token string">&quot;D:/new.txt&quot;</span>
	<span class="token comment">//打开文件，没有就创建一个，在linux 下rw可读可写</span>
	file<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">OpenFile</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span> os<span class="token punctuation">.</span>O_RDWR<span class="token operator">|</span>os<span class="token punctuation">.</span>O_CREATE<span class="token punctuation">,</span> <span class="token number">0666</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err<span class="token operator">!=</span><span class="token boolean">nil</span><span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;打开文件失败&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">defer</span>  file<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">var</span>  str<span class="token operator">=</span><span class="token string">&quot;我是写入的内容&quot;</span>
	n<span class="token punctuation">,</span> e <span class="token operator">:=</span> file<span class="token punctuation">.</span><span class="token function">WriteString</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
	<span class="token keyword">if</span> e <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;写入文件错误&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;写入的字节数是：&quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="_5-2-bufio包下的写文件"><a href="#_5-2-bufio包下的写文件" class="header-anchor">#</a> 5.2 bufio包下的写文件</h3> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;bufio&quot;</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;os&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	filePath <span class="token operator">:=</span> <span class="token string">&quot;D:/new.txt&quot;</span>
	<span class="token comment">//打开文件，没有就创建一个，在linux 下rw可读可写</span>
	file<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">OpenFile</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span> os<span class="token punctuation">.</span>O_RDWR<span class="token operator">|</span>os<span class="token punctuation">.</span>O_CREATE<span class="token punctuation">,</span> <span class="token number">0666</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;打开失败&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">defer</span> file<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//退出时关闭</span>
	str <span class="token operator">:=</span> <span class="token string">&quot;我是bufio写入内容&quot;</span>
	writer <span class="token operator">:=</span> bufio<span class="token punctuation">.</span><span class="token function">NewWriter</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token comment">//创建一个Writer</span>
	writer<span class="token punctuation">.</span><span class="token function">WriteString</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token comment">//将数据写入缓冲区</span>
	writer<span class="token punctuation">.</span><span class="token function">Flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//将缓存中的内容写入文件</span>
	<span class="token comment">//因为带缓冲区的writer ，是先将内容写入缓存，然后调用flush方法写入文件中</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="_5-3-ioutil下的写文件"><a href="#_5-3-ioutil下的写文件" class="header-anchor">#</a> 5.3 ioutil下的写文件</h3> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">//WriteFile 将data写入filename文件中，当文件不存在时会根据perm指定的权限进行创建一个,</span>
<span class="token comment">//文件存在时会先清空文件内容。对于perm参数，我们一般可以指定为：0666，具体含义os包中讲解。</span>
<span class="token keyword">func</span> <span class="token function">WriteFile</span><span class="token punctuation">(</span>filename <span class="token builtin">string</span><span class="token punctuation">,</span> data <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> perm os<span class="token punctuation">.</span>FileMode<span class="token punctuation">)</span> <span class="token builtin">error</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="举例-2"><a href="#举例-2" class="header-anchor">#</a> 举例</h4> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;io/ioutil&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	filePath1 <span class="token operator">:=</span> <span class="token string">&quot;d:/new.txt&quot;</span>
	filePath2<span class="token operator">:=</span><span class="token string">&quot;d:/xxx.txt&quot;</span>
	<span class="token comment">//读取文件new.txt的内容准备写入xxx.txt</span>
	bytes<span class="token punctuation">,</span> e <span class="token operator">:=</span> ioutil<span class="token punctuation">.</span><span class="token function">ReadFile</span><span class="token punctuation">(</span>filePath1<span class="token punctuation">)</span>
	<span class="token keyword">if</span> e<span class="token operator">!=</span><span class="token boolean">nil</span><span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;读取文件错误&quot;</span><span class="token punctuation">,</span>e<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// 写入文件内容</span>
	err <span class="token operator">:=</span> ioutil<span class="token punctuation">.</span><span class="token function">WriteFile</span><span class="token punctuation">(</span>filePath2<span class="token punctuation">,</span> bytes<span class="token punctuation">,</span> <span class="token number">0666</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;写入文件错误, err:&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h4 id="注意点-2"><a href="#注意点-2" class="header-anchor">#</a> 注意点</h4> <blockquote><p>ioutil读和写文件就是省事，工具。 但是写文件要注意的是，它没有回自动创建，并且有会清空文件，
所以如果你要往文件中追加内容就不能用writeFile了,所以，如果要追加还是清空，根据需求来</p></blockquote> <h2 id="_6文件编程应用实例"><a href="#_6文件编程应用实例" class="header-anchor">#</a> 6文件编程应用实例</h2> <h3 id="_6-1-拷贝文件"><a href="#_6-1-拷贝文件" class="header-anchor">#</a> 6.1 拷贝文件</h3> <blockquote><p>借助io.Copy()实现一个拷贝文件函数。io.Copy()简要说明如下</p></blockquote> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">//从src复制到dst，直到在src上到达EOF或发生错误。它返回复制的字节数和复制时遇到的第一个错误(如果有的话)。</span>
<span class="token comment">//成功复制将返回err==nil，而不是err==EOF。因为Copy被定义为从src读取到EOF，所以它不将从read读取的EOF视为要报告的错误。</span>
<span class="token comment">//如果src实现WriterTo接口，则通过调用src.writeto(dst)实现copy。否则，如果dst实现了ReaderFrom接口，则通过调用dst.readfrom(src)来实现copy。</span>
<span class="token keyword">func</span> <span class="token function">Copy</span><span class="token punctuation">(</span>dst Writer<span class="token punctuation">,</span> src Reader<span class="token punctuation">)</span> <span class="token punctuation">(</span>written <span class="token builtin">int64</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;io&quot;</span>
	<span class="token string">&quot;os&quot;</span>
<span class="token punctuation">)</span>

<span class="token comment">//CopyFile文件函数封装</span>
<span class="token comment">//参数说明 dstFileName--目标文件路径 srcFileName--源文件路径</span>
<span class="token comment">// 返回参数说明written--复制成功的字节数,err--复制失败的错误信息</span>
<span class="token keyword">func</span> <span class="token function">CopyFile</span><span class="token punctuation">(</span>dstFileName<span class="token punctuation">,</span> srcFileName <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>written <span class="token builtin">int64</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// 以读方式打开源文件</span>
	reader<span class="token punctuation">,</span> readError <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>srcFileName<span class="token punctuation">)</span>
	<span class="token keyword">if</span> readError <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;从 %s 打开文件失败, err:%v.\n&quot;</span><span class="token punctuation">,</span> srcFileName<span class="token punctuation">,</span> err<span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">,</span> readError
	<span class="token punctuation">}</span>
	<span class="token keyword">defer</span> reader<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//退出时关闭</span>

	<span class="token comment">// 以读写|创建的方式打开目标文件</span>
	writer<span class="token punctuation">,</span> writerError <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">OpenFile</span><span class="token punctuation">(</span>dstFileName<span class="token punctuation">,</span> os<span class="token punctuation">.</span>O_RDWR<span class="token operator">|</span>os<span class="token punctuation">.</span>O_CREATE<span class="token punctuation">,</span> <span class="token number">0666</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> writerError <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;从 %s 打开文件失败, err:%v.\n&quot;</span><span class="token punctuation">,</span> dstFileName<span class="token punctuation">,</span> err<span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">,</span> writerError
	<span class="token punctuation">}</span>
	<span class="token keyword">defer</span> writer<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//退出时关闭</span>

	<span class="token keyword">return</span> io<span class="token punctuation">.</span><span class="token function">Copy</span><span class="token punctuation">(</span>writer<span class="token punctuation">,</span> reader<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">//把srcFile.txt这个文件复制给d:/dstFile.txt</span>
	written<span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">CopyFile</span><span class="token punctuation">(</span><span class="token string">&quot;d:/dstFile.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;d:/srcFile.txt&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;复制文件失败, err:&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;复制成功！&quot;</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;复制的字节数&quot;</span><span class="token punctuation">,</span> written<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h3 id="_6-2-统计字符数量"><a href="#_6-2-统计字符数量" class="header-anchor">#</a> 6.2 统计字符数量</h3> <blockquote><p>看一个例子：统计一个文件中含有的英文、数字、空格以及其他字符数量</p> <ul><li>实现思路： 打开文件——&gt;逐行读——&gt;记录每一行的统计数量——&gt;得到总的统计</li></ul></blockquote> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;bufio&quot;</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;io&quot;</span>
	<span class="token string">&quot;os&quot;</span>
<span class="token punctuation">)</span>

<span class="token comment">// CharCount 统计个数的结构体</span>
<span class="token keyword">type</span>  CharCount <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	EnCount <span class="token builtin">int</span> <span class="token comment">//英文个数</span>
	NumCount <span class="token builtin">int</span> <span class="token comment">//数字个数</span>
	SpaceCount <span class="token builtin">int</span> <span class="token comment">//空格个数</span>
	OtherCount <span class="token builtin">int</span> <span class="token comment">//其他字符</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>

	file<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token string">&quot;d:/test.txt&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err<span class="token operator">!=</span><span class="token boolean">nil</span><span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">defer</span>  file<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	count<span class="token operator">:=</span>CharCount<span class="token punctuation">{</span><span class="token punctuation">}</span>
	reader <span class="token operator">:=</span> bufio<span class="token punctuation">.</span><span class="token function">NewReader</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span>
	<span class="token keyword">for</span><span class="token punctuation">{</span>
		s<span class="token punctuation">,</span> err <span class="token operator">:=</span> reader<span class="token punctuation">.</span><span class="token function">ReadString</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span>
		<span class="token keyword">if</span> err<span class="token operator">==</span>io<span class="token punctuation">.</span>EOF<span class="token punctuation">{</span>
			<span class="token keyword">break</span>
		<span class="token punctuation">}</span>
		str<span class="token operator">:=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">rune</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
		<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span>v<span class="token operator">:=</span><span class="token keyword">range</span> str<span class="token punctuation">{</span>
			<span class="token keyword">switch</span><span class="token punctuation">{</span>
			<span class="token keyword">case</span> v<span class="token operator">&gt;</span><span class="token string">'a'</span><span class="token operator">&amp;&amp;</span>v<span class="token operator">&lt;</span><span class="token string">'z'</span><span class="token punctuation">:</span>
				<span class="token keyword">fallthrough</span>
			<span class="token keyword">case</span> v<span class="token operator">&gt;</span><span class="token string">'A'</span><span class="token operator">&amp;&amp;</span>v<span class="token operator">&lt;</span><span class="token string">'Z'</span><span class="token punctuation">:</span>
				count<span class="token punctuation">.</span>EnCount<span class="token operator">++</span>
			<span class="token keyword">case</span> v<span class="token operator">==</span><span class="token string">' '</span><span class="token operator">||</span>v<span class="token operator">==</span><span class="token string">'\t'</span><span class="token punctuation">:</span>
				count<span class="token punctuation">.</span>SpaceCount<span class="token operator">++</span>
			<span class="token keyword">case</span> v<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&amp;&amp;</span>v<span class="token operator">&lt;</span><span class="token number">9</span><span class="token punctuation">:</span>
				count<span class="token punctuation">.</span>NumCount<span class="token operator">++</span>
			<span class="token keyword">default</span><span class="token punctuation">:</span>
				count<span class="token punctuation">.</span>OtherCount<span class="token operator">++</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot; 英文个数：%d\n 数字个数：%d\n 空格个数：%d\n 其他字符个数:%d\n&quot;</span><span class="token punctuation">,</span>count<span class="token punctuation">.</span>EnCount<span class="token punctuation">,</span>count<span class="token punctuation">.</span>NumCount<span class="token punctuation">,</span>count<span class="token punctuation">.</span>SpaceCount<span class="token punctuation">,</span>count<span class="token punctuation">.</span>OtherCount<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2020-2-20 22:34:35</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/go/learn-go/28 Go语言并发编程.html" class="prev">
        Go语言并发编程
      </a></span> <span class="next"><a href="/go/learn-go/30 Go语言单元测试.html">
        Go语言单元测试
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.30b04212.js" defer></script><script src="/assets/js/2.73c04003.js" defer></script><script src="/assets/js/83.56277cf4.js" defer></script>
  </body>
</html>
